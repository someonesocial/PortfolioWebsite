var q=Object.defineProperty;var D=(e,t,s)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var a=(e,t,s)=>(D(e,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();const c=document.querySelector("canvas"),d=c.getContext("2d");let F=document.querySelector("#movement"),S=document.querySelector("#gravity");function u(e,t){return Math.random()*(t-e)+e}function p(e,t,s,l){const i=s-e,o=l-t;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}function f(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}}function b(e,t){const s=e.velocity.x-t.velocity.x,l=e.velocity.y-t.velocity.y,i=t.x-e.x,o=t.y-e.y;if(s*i+l*o>=0){const r=-Math.atan2(t.y-e.y,t.x-e.x),n=e.mass,y=t.mass,v=f(e.velocity,r),x=f(t.velocity,r),L={x:v.x*(n-y)/(n+y)+x.x*2*y/(n+y),y:v.y},O={x:x.x*(y-n)/(n+y)+v.x*2*n/(n+y),y:x.y},g=f(L,-r),w=f(O,-r);e.velocity.x=g.x,e.velocity.y=g.y,t.velocity.x=w.x,t.velocity.y=w.y}}c.width=innerWidth;c.height=innerHeight;const E="#fff";let m=0;S.addEventListener("change",e=>{e.target.checked?(console.log("Gravity added"),m=.16):(console.log("Gravity removed"),m=0)});addEventListener("mousemove",e=>{e.clientX,e.clientY});addEventListener("resize",()=>{c.width=innerWidth,c.height=innerHeight});class N{constructor(t,s,l,i,o,r){a(this,"x");a(this,"y");a(this,"velocity");a(this,"radius");a(this,"mass");a(this,"color");this.x=t,this.y=s,this.velocity=l,this.radius=i,this.mass=o,this.color=r}update(t){this.draw(),this.y+this.radius+this.velocity.y>c.height?this.velocity.y=-this.velocity.y:this.velocity.y+=m,this.y-this.radius+this.velocity.y<=0&&(this.velocity.y=-this.velocity.y),(this.x+this.radius+this.velocity.x>=c.width||this.x-this.radius+this.velocity.x<=0)&&(this.velocity.x=-this.velocity.x);for(let s=0;s<t.length;s++)this!==t[s]&&p(this.x,this.y,t[s].x,t[s].y)-this.radius*2<0&&b(this,t[s]);this.x+=this.velocity.x,this.y+=this.velocity.y}draw(){d.beginPath(),d.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),d.fillStyle=this.color,d.fill(),d.closePath()}}function V(){const e=innerWidth*innerHeight,t=(20*10)**2;return Math.floor(e/t)}let h=[];function B(){h=[];const e=V();for(let t=0;t<e;t++){let i=u(20,c.width-20),o=u(20,c.height-20);if(t!==0)for(let n=0;n<h.length;n++)p(i,o,h[n].x,h[n].y)-20*2<0&&(i=u(20,c.width-20),o=u(20,c.height-20),n=-1);const r={x:u(-1.5,1.5),y:u(-1.5,1.5)};console.log(r.x,r.y),h.push(new N(i,o,r,20,1,E)),d.clearRect(0,0,c.width,c.height);for(let n=0;n<h.length;n++)h[n].update(h)}}function M(){if(requestAnimationFrame(M),F.checked){d.clearRect(0,0,c.width,c.height);for(let e=0;e<h.length;e++)h[e].update(h)}}B();M();
